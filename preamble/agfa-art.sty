%% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Startpaket für AGFA-Master
%% agfa-art.sty
%% Stand: 2025-10-16
%% Literatur: Der LaTeX-Begleiter, A.4, Seite 910 ff
%% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Kenndaten
%% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\NeedsTeXFormat{LaTeX2e}											
\ProvidesPackageagfa-art}
%% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Initialisierungen
%% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\RequirePackage{ifthen}
	\provideboolean{numeric}
	\provideboolean{alphabetic}     
	%\provideboolean{philosophy}      
	%\provideboolean{urldoi}
 	\provideboolean{english}
 	\provideboolean{german}
	\provideboolean{refenglish}
	\provideboolean{lmodern}
	\provideboolean{libertinus}
	\provideboolean{thmframed}
	\provideboolean{framed}
	\provideboolean{review}

%%

%% -- Deklaration von Optionen
%% --

\DeclareOption*{\expandafter\PassOptionsToClass\expandafter{\CurrentOption}{scrartcl}}

%% -- Sprache (alle english-bezogenen Aktionen zusammen)
%% --

\DeclareOption{english}{%
	\setboolean{english}{true}%
	\setboolean{refenglish}{true}%
	\PassOptionsToPackage{english}agfa-babel}%
	\PassOptionsToPackage{english}agfa-hyperef}%
	\PassOptionsToPackage{english}agfa-theorem}%
	\PassOptionsToPackage{english}agfa-biblio}%  
}

%% -- mathematische Umgebungen mit/ohne Rahmen
%% --

\DeclareOption{thmframed}{\PassOptionsToPackage{framed}agfa-theorem}}

%% -- Schrift
%% --

\DeclareOption{lmodern}{\PassOptionsToPackage{lmodern}agfa-font}}
\DeclareOption{libertinus}{\PassOptionsToPackage{libertinus}agfa-font}}

%% -- Bibliographie-Stile  
%% --

\DeclareOption{numeric}{\PassOptionsToPackage{numeric}agfa-biblio}}
\DeclareOption{alphabetic}{\PassOptionsToPackage{alphabetic}agfa-biblio}}
%\DeclareOption{philosophy}{\PassOptionsToPackage{philosophy}agfa-biblio}}
%\DeclareOption{urldoi}{\PassOptionsToPackage{urldoi}agfa-biblio}}

%% -- Zeilenabstand verdoppelt
%% --
\DeclareOption{review}{\setboolean{review}{true}} 

\ProcessOptions\relax

%% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Laden von Paketen 
%% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\RequirePackage[all]{onlyamsmath}			% Fehler bei Eingabe Mathematik
\RequirePackage[l2tabu,orthodox]{nag}
\RequirePackage{etex,etoolbox,letltxmacro,metalogo}

%% -- 
\RequirePackageagfa-font}
\RequirePackageagfa-layout}
\RequirePackageagfa-pakete}
\RequirePackageagfa-babel}
\RequirePackageagfa-listen}
%% --
\RequirePackageagfa-mathtools}
\RequirePackageagfa-theorem}
%% --
\RequirePackageagfa-defn}
\RequirePackageagfa-biblio}
%% --
\RequirePackageagfa-hyperref}
%% --
\RequirePackageagfa-abkuerz}	

%% -- Zeilenabstand für review
%% --
\ifthenelse{\boolean{review}}
{%% -- if
	\RequirePackage[doublespacing]{setspace}
 }
 {%% -- else
 }

%% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Automatische Klammergrößenanpassung
%% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% WARNUNG: Macht (), [] zu aktiven Zeichen!
%% Kann in TikZ, Beamer oder anderen Paketen zu Problemen führen.
%% Quelle: DTK 1/2011 & Herbert Voß
%% %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\makeatletter
\gdef\resetMathstrut@{%
    \setbox\z@\hbox{%
        \mathchardef\@tempa\mathcode`\!\relax%
        \def\@tempb##1"##2##3{\the\textfont"##3\char"}%
        \expandafter\@tempb\meaning\@tempa \relax
    }%
    \ht\Mathstrutbox@\ht\z@ \dp\Mathstrutbox@\dp\z@}
\makeatother

\begingroup
    \catcode`(\active \xdef({\left\string(}
    \catcode`)\active \xdef){\right\string)}
    \catcode`[\active \xdef[{\left\string[}
    \catcode`]\active \xdef]{\right\string]}
\endgroup
\mathcode`(="8000 \mathcode`)="8000
\mathcode`[="8000 \mathcode`]="8000

%% Geschweifte Klammern: Funktionieren sowohl in Mathe als auch Text
\DeclareRobustCommand{\{}{\ifmmode\left\lbrace\else\textbraceleft\fi}
\DeclareRobustCommand{\}}{\ifmmode\right\rbrace\else\textbraceright\fi}

\endinput


















